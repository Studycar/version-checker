{
	"APS页面-ts模板": {
		"scope": "typescript",
		"prefix": "aps-page",
		"description": "APS页面-ts模板",
		"body": [
			"import { Component, OnInit, ViewChild, } from '@angular/core';",
			"import { BrandService } from 'app/layout/pro/pro.service';",
			"import { AppTranslationService } from 'app/modules/base_module/services/app-translation-service';",
			"import { AppConfigService } from 'app/modules/base_module/services/app-config-service';",
			"import { NzMessageService, NzModalService } from 'ng-zorro-antd';",
			"import { ModalHelper } from '@delon/theme';",
			"import { CustomBaseContext } from 'app/modules/base_module/components/custom-base-context.component';",
			"import { CustomExcelExportComponent } from 'app/modules/base_module/components/custom-excel-export.component';",
			"import { UiType } from 'app/modules/base_module/components/custom-form-query.component';",
			"import { QueryService } from './query.service';",
			"",
			"@Component({",
			"\tselector: '${TM_FILENAME_BASE/.component//g}',",
			"\ttemplateUrl: './$TM_FILENAME_BASE.html',",
			"\tproviders: [QueryService],",
			"})",
			"export class ${1:componentName}Component extends CustomBaseContext implements OnInit {",
			"\tconstructor(",
			"\t\tpublic pro: BrandService,",
			"\t\tpublic appTranslationService: AppTranslationService,",
			"\t\tpublic appConfigService: AppConfigService,",
			"\t\tpublic msgSrv: NzMessageService,",
			"\t\tpublic confirmationService: NzModalService,",
			"\t\tpublic modal: ModalHelper,",
			"\t\tpublic queryService: QueryService,",
			"\t) {",
			"\t\tsuper({",
			"\t\t\tpro: pro,",
			"\t\t\tappTranslationSrv: appTranslationService,",
			"\t\t\tmsgSrv: msgSrv,",
			"\t\t\tappConfigSrv: appConfigService,",
			"\t\t});",
			"\t\tthis.headerNameTranslate(this.columns);",
			"\t}",
			"",
			"\t// 查询/导出接口配置",
			"\thttpAction = {",
			"\t\turl: '',",
			"\t\tmethod: 'GET',",
			"\t};",
			"",
			"\t// 表格列配置",
			"\t\tcolumns = [",
			"\t];",
			"",
			"\t// 查询条件配置",
			"\tqueryParams = {",
			"\t\tdefines: [],",
			"\t\tvalues: {}",
			"\t};",
			"",
			"\t// 获取查询条件",
			"\tgetQueryParams(isExport?: boolean): any {",
			"\t\tconst params: any = { ...this.queryParams.values };",
			"\t\tif (isExport) {",
			"\t\t\tparams.isExport = true;",
			"\t\t} else {",
			"\t\t\tparams.isExport = false;",
			"\t\t\tparams.pageIndex = this._pageNo;",
			"\t\t\tparams.pageSize = this._pageSize;",
			"\t\t}",
			"\t\treturn params;",
			"\t}",
			"",
			"\t// 初始化生命周期",
			"\tngOnInit(): void {",
			"\t\tthis.loadData();",
			"\t\tthis.query();",
			"\t}",
			"",
			"\t// 查询搜索条件",
			"\tloadData() {",
			"",
			"\t}",
			"",
			"\tquery() {",
			"\t\tsuper.query();",
			"\t\tthis.queryCommon();",
			"\t}",
			"",
			"\t// 查询方法",
			"\tqueryCommon() {",
			"\t\tthis.queryService.loadGridViewNew(",
			"\t\t\tthis.httpAction,",
			"\t\t\tthis.getQueryParams(),",
			"\t\t\tthis.context,",
			"\t\t);",
			"\t}",
			"",
			"\t// 重置",
			"\tpublic clear() {",
			"\t\tthis.queryParams.values = {",
			"\t\t};",
			"\t}",
			"",
			"\tlastPageNo = this._pageNo;",
			"\tlastPageSize = this._pageSize;",
			"\t// 页码切换",
			"\tonPageChanged({ pageNo, pageSize }) {",
			"\t\tif (this.lastPageNo !== pageNo || this.lastPageSize !== pageSize) {",
			"\t\t\tif (this.lastPageSize !== pageSize) {",
			"\t\t\t\tthis.gridApi.paginationSetPageSize(pageSize);",
			"\t\t\t}",
			"\t\t\tthis.lastPageNo = pageNo;",
			"\t\t\tthis.lastPageSize = pageSize;",
			"\t\t\tthis.queryCommon();",
			"\t\t} else {",
			"\t\t\tthis.setLoading(false);",
			"\t\t}",
			"\t}",
			"",
			"\t// 导出",
			"\texpColumns: any[] = [];",
			"\texpColumnsOptions: any[] = [];",
			"\t@ViewChild('excelexport', { static: true }) excelexport: CustomExcelExportComponent;",
			"\tpublic export() {",
			"\t\tsuper.export();",
			"\t\tthis.expColumns = this.excelexport.setExportColumn(this.columns);",
			"\t\tconst params = this.getQueryParams(true);",
			"\t\tthis.queryService.exportAction(",
			"\t\t\tthis.httpAction,",
			"\t\t\tparams,",
			"\t\t\tthis.excelexport,",
			"\t\t\tthis.context",
			"\t\t);",
			"\t}",
			"}"
		]
	},
	"APS页面-html模板": {
		"scope": "html",
		"prefix": "aps-page-html",
		"description": "APS页面-html模板",
		"body": [
			"<!-- 查询及头部按钮 -->",
			"<custom-formquery [queryParams]=\"queryParams\" [context]=\"context\"",
			">",
			"\t<span>",
			"\t\t<custom-button text=\"{{ '导出' | translate}}\" (clickEvent)=\"export()\" [src]=\"'基础icon-导出'\">",
			"\t\t</custom-button>",
			"\t</span>",
			"</custom-formquery>",
			"<nz-card>",
			"\t<!-- 表格 -->",
			"\t<ag-grid-angular",
			"\t\t#agGrid",
			"\t\tid=\"\"",
			"\t\t[class]=\"themeClass\"",
			"\t\t[style.height.px]=\"gridHeight\"",
			"\t\t[rowData]=\"gridData\"",
			"\t\t[columnDefs]=\"columns\"",
			"\t\t[gridOptions]=\"gridOptions\"",
			"\t\t[myAgGridState]=\"\"",
			"\t\t[myAgGridRowKey]=\"{ tb:'' }\"",
			"\t>",
			"\t</ag-grid-angular>",
			"\t<!-- 分页系统 -->",
			"\t<custom-pager",
			"\t\t[height]=\"pagerHeight\"",
			"\t\t[context]=\"context\"",
			"\t\t[view]=\"context.view\"",
			"\t\t[(pageSize)]=\"_pageSize\"",
			"\t\t[(pageNo)]=\"_pageNo\"",
			"\t\t(pageChangeEvent)=\"onPageChanged(\\$event)\">",
			"\t</custom-pager>",
			"\t<!-- 导出功能组件 -->",
			"\t<custom-excelexport [expColumns]=\"expColumns\" fileName=\"\" #excelexport></custom-excelexport>",
			"</nz-card>"
		]
	},
	"APS queryService ts模板": {
		"scope": "typescript",
		"prefix": "aps-query-service",
		"description": "APS queryService ts模板",
		"body": [
			"import { Injectable } from '@angular/core';",
			"import { CommonQueryService } from 'app/modules/generated_module/services/common-query.service';",
			"import { Observable } from 'rxjs';",
			"import { ResponseDto } from 'app/modules/generated_module/dtos/response-dto';",
			"",
			"@Injectable()",
			"export class QueryService extends CommonQueryService {",
			"\t// 接口模板",
			"\ttest(dto: any): Observable<ResponseDto> {",
			"\t\treturn this.http.get(",
			"\t\t\t'请求地址',",
			"\t\t\tdto,",
			"\t\t)",
			"\t}",
			"}",
			""
		]
	},
	"APS弹层页面-html模板": {
		"scope": "html",
		"prefix": "aps-modal-html",
		"description": "APS弹层页面-html模板",
		"body": [
			"<!-- 头部 -->",
			"<div class=\"modal-header\">",
			"\t<div class=\"modal-title\">{{ (isModify?'编辑':'新增') | translate}}</div>",
			"</div>",
			"<div style=\"margin:2px auto;\" *ngIf=\"isModify\">",
			"\t<button style=\"float: right;\" nz-button nzType=\"dashed\" (click)=\"clear()\">{{ '重置' | translate}}</button>",
			"\t<div style=\"clear: both;\"></div>",
			"</div>",
			"<!-- 内容 -->",
			"<div>",
			"\t<form nz-form #f=\"ngForm\" se-container=\"2\">",
			"\t\t<se label=\"{{ '输入框' | translate}}\" required>",
			"\t\t\t<input type=\"text\" nz-input [(ngModel)]=\"i.text1\" name=\"text1\" required>",
			"\t\t</se>",
			"\t\t<se label=\"{{ '下拉选择' | translate}}\" required>",
			"\t\t\t<nz-select nzShowSearch [(ngModel)]=\"i.select1\" name=\"select1\" required>",
			"\t\t\t\t<nz-option *ngFor=\"let option of selectOptions\" [nzLabel]=\"option.label\" [nzValue]=\"option.value\">",
			"\t\t\t\t</nz-option>",
			"\t\t\t</nz-select>",
			"\t\t</se>",
			"\t\t<se label=\"{{ '日期选择' | translate}}\" required>",
			"\t\t\t<nz-date-picker [(ngModel)]=\"i.date1\" name=\"date1\" required></nz-date-picker>",
			"\t\t</se>",
			"\t</form>",
			"</div>",
			"<!-- 底部 -->",
			"<div class=\"modal-footer\">",
			"\t<button nz-button type=\"submit\" [nzType]=\"'primary'\" (click)=\"save(f)\"",
			"\t\t[disabled]=\"!f.valid || !f.dirty\" [nzLoading]=\"loading\">{{ '保存' | translate}}</button>",
			"\t<button nz-button type=\"button\" (click)=\"close()\">{{ '关闭' | translate}}</button>",
			"</div>"
		]
	},
	"APS弹层-ts模板": {
		"scope": "typescript",
		"prefix": "aps-modal",
		"description": "APS弹层-ts模板",
		"body": [
			"import { Component, OnInit } from '@angular/core';",
			"import { NzModalRef, NzMessageService } from 'ng-zorro-antd';",
			"import { AppTranslationService } from 'app/modules/base_module/services/app-translation-service';",
			"import { AppConfigService } from 'app/modules/base_module/services/app-config-service';",
			"import { QueryService } from '../query.service';",
			"",
			"@Component({",
			"\tselector: '${TM_FILENAME_BASE/.component//g}',",
			"\ttemplateUrl: './$TM_FILENAME_BASE.html',",
			"\tproviders: [QueryService]",
			"})",
			"export class EditComponent implements OnInit {",
			"\tconstructor(",
			"\t\tprivate modal: NzModalRef,",
			"\t\tprivate msgSrv: NzMessageService,",
			"\t\tprivate queryService: QueryService,",
			"\t\tprivate appTranslationService: AppTranslationService,",
			"\t\tprivate appConfigService: AppConfigService,",
			"\t) {",
			"",
			"\t}",
			"",
			"\tloading = false;",
			"\tisModify = false;",
			"\ti: any;",
			"\tiClone: any;",
			"\t// 测试用的下拉列表，可删除",
			"\tselectOptions: { label: any, value: any, [key: string]: any }[] = [];",
			"",
			"\t// 初始化",
			"\tngOnInit(): void {",
			"\t\tif (this.i.id !== null) {",
			"\t\t\tthis.isModify = true;",
			"\t\t\tthis.iClone = Object.assign({}, this.i);",
			"\t\t}",
			"\t\tthis.loadData();",
			"\t}",
			"",
			"\t// 加载搜索项",
			"\tloadData() {",
			"\t}",
			"",
			"\t// 保存",
			"\tsave(value: any) {",
			"\t\tthis.modal.close(true);",
			"\t}",
			"",
			"\t// 关闭",
			"\tclose() {",
			"\t\tthis.modal.destroy();",
			"\t}",
			"",
			"\t// 重置",
			"\tclear() {",
			"\t\tthis.i = Object.assign({}, this.iClone);",
			"\t}",
			"",
			"}"
		]
	}
}
